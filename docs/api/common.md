# 通用规范

## 请求格式

所有API请求应使用以下HTTP方法：

- `GET`: 用于获取资源
- `POST`: 用于创建资源
- `PUT`: 用于更新资源
- `DELETE`: 用于删除资源

## 通用响应格式

### 成功响应

```json
{
  "code": 200,         // HTTP状态码
  "success": true,     // 请求是否成功
  "message": "操作成功", // 响应消息
  "data": {}           // 返回的数据(对象或数组)
}
```

### 错误响应

```json
{
  "code": 400,           // HTTP错误码
  "success": false,      // 请求失败
  "message": "错误信息",  // 错误描述
  "errors": []           // 详细错误信息(可选)
}
```

## 状态码说明

| 状态码 | 描述 |
|---|---|
| 200 | 请求成功 |
| 201 | 资源创建成功 |
| 204 | 请求成功，无返回内容 |
| 400 | 请求参数错误 |
| 401 | 未授权 |
| 403 | 权限不足 |
| 404 | 资源不存在 |
| 409 | 资源冲突 |
| 422 | 请求格式正确，但由于语义错误而无法处理 |
| 500 | 服务器内部错误 |

## 分页参数

对于返回列表的接口，支持以下分页参数：

- `page`: 页码，默认为1
- `pageSize`: 每页记录数，默认为20，最大为100

分页响应格式：

```json
{
  "code": 200,
  "success": true,
  "message": "查询成功",
  "data": {
    "total": 100,       // 总记录数
    "page": 1,          // 当前页码
    "pageSize": 20,     // 每页记录数
    "totalPages": 5,    // 总页数
    "items": []         // 当前页的数据项
  }
}
```

## 排序参数

- `sort`: 排序字段，例如 `name`
- `order`: 排序方向，可选值为 `asc`（升序）或 `desc`（降序），默认为 `asc`

## 搜索参数

- `query`: 全局搜索关键词
- 特定字段搜索：使用字段名作为参数名，例如 `name=服务器`

## 字段过滤

- `fields`: 指定返回的字段，多个字段用逗号分隔，例如 `fields=id,name,status`

## 认证与授权

所有API请求需要在HTTP头部包含有效的认证令牌：

```
Authorization: Bearer {token}
```

## 请求速率限制

为保护API服务器不被滥用，实施了请求速率限制：

- 每个IP地址每分钟最多100个请求
- 每个用户每分钟最多300个请求

超出限制时，服务器将返回429状态码（Too Many Requests）。
